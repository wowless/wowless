describe('sandbox', function()
  local m = require('wowless.sandbox')
  assert.same('table', type(m))
  assert.Nil(getmetatable(m))
  local s = m.create()
  assert.same('userdata', type(s))
  assert.same('wowless-sandbox', getmetatable(s))

  describe('dostring', function()
    it('requires a string', function()
      assert.errors(function()
        s:dostring()
      end)
    end)
    it('requires valid lua', function()
      assert.errors(function()
        s:dostring('"boo"')
      end)
    end)
    it('works', function()
      assert.same({ 42, nil, 'moo' }, { s:dostring('return 42, {}, "moo"') })
    end)
  end)
end)
