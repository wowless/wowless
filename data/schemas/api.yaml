---
name: api
type:
  oneof:
  - record:
      alias:
        required: true
        type: string
      name:
        required: true
        type: string
  - record:
      name:
        required: true
        type: string
      stdlib:
        required: true
        type: string
  - record:
      comment:
        type: string
      dbs:
        type:
          sequenceof:
            record:
              index:
                type: string
              name:
                required: true
                type:
                  ref: db
      debug:
        type: boolean
      frameworks:
        type:
          sequenceof:
            oneof:
            - literal: api
            - literal: env
            - literal: loader
      inputs:
        type:
          sequenceof:
            sequenceof:
              record:
                default:
                  type:
                    schema: any
                innerType:
                  type: string
                mixin:
                  type: string
                name:
                  type: string
                nilable:
                  type: boolean
                type:
                  required: true
                  type:
                    oneof:
                    - literal: boolean
                    - literal: function
                    - literal: number
                    - literal: string
                    - literal: table
                    - literal: unit
                    - literal: unknown
                    - ref: structure
      name:
        required: true
        type: string
      nowrap:
        type: boolean
      outputs:
        type:
          sequenceof:
            record:
              default:
                type:
                  schema: any
              innerType:
                type:
                  oneof:
                  - literal: boolean
                  - literal: number
                  - literal: string
                  - literal: table
                  - literal: unknown
                  - ref: structure
              mixin:
                type: string
              name:
                type: string
              nilable:
                type: boolean
              stub:
                type:
                  schema: any
              type:
                required: true
                type:
                  oneof:
                  - literal: boolean
                  - literal: function
                  - literal: nil
                  - literal: number
                  - literal: oneornil
                  - literal: string
                  - literal: table
                  - literal: unknown
                  - ref: structure
      products:
        type:
          schema: products
      protection:
        type:
          oneof:
          - literal: hardware
          - literal: secure
      sqls:
        type:
          sequenceof:
            oneof:
            - record:
                cursor:
                  type:
                    ref: sqlcursor
            - record:
                lookup:
                  type:
                    ref: sqllookup
      states:
        type:
          sequenceof:
            ref: state
      status:
        required: true
        type:
          oneof:
          - literal: autogenerated
          - literal: implemented
          - literal: unimplemented
